pr:
    branches:
      include:
      - '*'

pool:
    vmImage: ubuntu-latest

steps:
    - checkout: self
      fetchDepth: 1
    - task: NodeTool@0
      inputs:
          versionSpec: 18.16.0
      displayName: Install Node.js
    - task: Cache@2
      inputs:
          key: 'yarn | "$(Agent.OS)" | yarn.lock'
          restoreKeys: |
              yarn | "$(Agent.OS)"
          path: $(Pipeline.Workspace)/.yarn
      displayName: Cache yarn dependencies
    - script: yarn install --frozen-lockfile
      displayName: Install dependencies
    - script: yarn lint:ci
      displayName: ESLint
    - script: yarn test
      displayName: Test

